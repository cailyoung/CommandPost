--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--                 S T R E A M    D E C K     P L U G I N                     --
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------

--- === plugins.finalcutpro.streamdeck ===
---
--- Stream Deck Plugin for Final Cut Pro.

--------------------------------------------------------------------------------
--
-- EXTENSIONS:
--
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- CommandPost Extensions:
--------------------------------------------------------------------------------
local fcp                                       = require("cp.apple.finalcutpro")

--------------------------------------------------------------------------------
--
-- THE PLUGIN:
--
--------------------------------------------------------------------------------
local plugin = {
    id = "finalcutpro.streamdeck",
    group = "finalcutpro",
    dependencies = {
        ["core.streamdeck.manager"]     = "manager",
    }
}

--------------------------------------------------------------------------------
-- INITIALISE PLUGIN:
--------------------------------------------------------------------------------
function plugin.init(deps)

    --------------------------------------------------------------------------------
    -- Update Touch Bar Buttons when FCPX is active:
    --------------------------------------------------------------------------------
    fcp:watch({
        active      = function() deps.manager.groupStatus("fcpx", true) end,
        inactive    = function() deps.manager.groupStatus("fcpx", false) end,
    })

end

return plugin
